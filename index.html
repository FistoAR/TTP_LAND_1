<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TTP LAND WEBPAGE</title>
    <link rel="stylesheet" href="./style.css">
    <link rel="icon" href="./favicon.png">
</head>

<body>

    <!-- ‚ïê‚ïê‚ïê NAVBAR ‚ïê‚ïê‚ïê -->
    <nav class="navbar">
        <div class="navbar-left">
            <img src="./logo-terra.png" alt="Logo" class="navbar-logo" onerror="this.style.display='none'">
        </div>
        <div class="navbar-center">
            <span class="navbar-title">Elegant Living Affordable For All</span>
        </div>
        <div class="navbar-right">
            <button class="btn-login" id="btn-login">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" />
                    <circle cx="12" cy="7" r="4" />
                </svg>
                Login
            </button>

            <!-- Profile button ‚Äî shown after login -->
            <button class="btn-profile" id="btn-profile">
                <span class="btn-profile-avatar" id="btn-profile-avatar">A</span>
                <span id="btn-profile-name">Admin</span>
            </button>
        </div>
    </nav>

    <!-- ‚ïê‚ïê‚ïê VIEWPORT ‚ïê‚ïê‚ïê -->
    <div id="viewport">
        <div id="svg-container">
            <!-- SVG will be injected here as inline SVG -->
        </div>
    </div>

    <!-- ‚ïê‚ïê‚ïê TOOLTIP ‚ïê‚ïê‚ïê -->
    <div id="svg-tooltip"></div>

    <!-- ‚ïê‚ïê‚ïê LOADING ‚ïê‚ïê‚ïê -->
    <div id="loading">
        <div class="spinner"></div>
        Loading Land‚Ä¶
    </div>

    <!-- ‚ïê‚ïê‚ïê TOOLBAR ‚Äî bottom left ‚ïê‚ïê‚ïê -->
    <div class="toolbar">
        <button id="btn-zoom-in" title="Zoom In">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                <circle cx="11" cy="11" r="8" />
                <line x1="21" y1="21" x2="16.65" y2="16.65" />
                <line x1="11" y1="8" x2="11" y2="14" />
                <line x1="8" y1="11" x2="14" y2="11" />
            </svg>
            Zoom In
        </button>
        <button id="btn-zoom-out" title="Zoom Out">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                <circle cx="11" cy="11" r="8" />
                <line x1="21" y1="21" x2="16.65" y2="16.65" />
                <line x1="8" y1="11" x2="14" y2="11" />
            </svg>
            Zoom Out
        </button>
        <button id="btn-fit" title="Fit to Screen">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                <path
                    d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3" />
            </svg>
            Fit
        </button>
    </div>

    <!-- ‚ïê‚ïê‚ïê ZOOM BADGE ‚ïê‚ïê‚ïê -->
    <div id="zoom-badge">100 %</div>

    <!-- ‚ïê‚ïê‚ïê TOAST ‚ïê‚ïê‚ïê -->
    <div id="toast">üñ± Scroll to zoom ¬∑ Drag to pan</div>

    <!-- ‚ïê‚ïê‚ïê FLOATING ACTION BUTTON ‚Äî Dashboard only ‚ïê‚ïê‚ïê -->
    <div class="fab-wrap" id="fab-wrap">
        <button class="fab-main" id="btn-dashboard" title="Dashboard & Reports" style="display: none;">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.2">
                <rect x="3" y="3" width="7" height="7" rx="1" />
                <rect x="14" y="3" width="7" height="7" rx="1" />
                <rect x="14" y="14" width="7" height="7" rx="1" />
                <rect x="3" y="14" width="7" height="7" rx="1" />
            </svg>
            <span class="fab-tooltip">Dashboard & Reports</span>
        </button>
    </div>

    <!-- ‚ïê‚ïê‚ïê DASHBOARD POPUP ‚ïê‚ïê‚ïê -->
    <div id="dashboard-popup" class="dash-overlay">
        <div class="dash-card">

            <!-- Header -->
            <div class="dash-header">
                <div class="dash-header-left">
                    <span class="dash-icon">
                        <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="#ffffff" stroke-width="2.2">
                            <rect x="3" y="3" width="7" height="7" rx="1" />
                            <rect x="14" y="3" width="7" height="7" rx="1" />
                            <rect x="14" y="14" width="7" height="7" rx="1" />
                            <rect x="3" y="14" width="7" height="7" rx="1" />
                        </svg>
                    </span>
                    <div>
                        <h2 class="dash-title">Dashboard & Reports</h2>
                        <p class="dash-sub">Plot Sales Overview</p>
                    </div>
                </div>
                <button class="dash-close" id="dash-close">‚úï</button>
            </div>

            <!-- Status Cards -->
            <div class="dash-body">
                <div class="dash-section-label">Plot Status Summary</div>

                <div class="dash-stats">
                    <div class="stat-card sold">
                        <div class="stat-icon">üèõ</div>
                        <div class="stat-count" id="stat-sold">12</div>
                        <div class="stat-label">Sold</div>

                    </div>
                    <div class="stat-card inprog">
                        <div class="stat-icon">üîñ</div>
                        <div class="stat-count" id="stat-inprog">7</div>
                        <div class="stat-label">In Progress</div>

                    </div>
                    <div class="stat-card avail">
                        <div class="stat-icon">‚úÖ</div>
                        <div class="stat-count" id="stat-avail">6</div>
                        <div class="stat-label">Available</div>

                    </div>
                </div>

                <!-- ‚ïê‚ïê DASHBOARD TABS ‚ïê‚ïê -->
                <div class="dtab-bar">
                    <button class="dtab active" id="dtab-customer" onclick="switchDashTab('customer')">üë§ Customer
                        Details</button>
                    <button class="dtab" id="dtab-mediator" onclick="switchDashTab('mediator')">ü§ù Mediator</button>
                    <button class="dtab" id="dtab-plot" onclick="switchDashTab('plot')">üìê Plot Price</button>
                </div>

                <!-- ‚ïê‚ïê TAB PANEL: CUSTOMER DETAILS ‚ïê‚ïê -->
                <div class="dtab-panel active" id="dpanel-customer">
                    <div class="dtab-toolbar">
                        <input type="text" class="dtab-search" id="cust-search" placeholder="üîç Search customers‚Ä¶"
                            oninput="filterDashTable('customer')">
                        <select class="dtab-filter" id="cust-status-filter" onchange="filterDashTable('customer')">
                            <option value="">All Status</option>
                            <option value="register">üèõ Registered</option>
                            <option value="progress">üîñ In Progress</option>
                        </select>
                        <button class="dtab-export-btn" onclick="exportToExcel('customer')">‚¨á Export Excel</button>
                    </div>
                    <div class="dash-table-wrap">
                        <table class="dash-table" id="customerTable">
                            <thead>
                                <tr>
                                    <th>S.No.</th>
                                    <th>Customer Name</th>
                                    <th>Phone</th>
                                    <th>Plot</th>
                                    <th>Plot Price</th>
                                    <th>Mediator</th>
                                    <th>Closure Date</th>
                                    <th>Status</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody id="customerTableBody">
                                <tr id="noCustomerRow">
                                    <td colspan="9" style="text-align:center;color:#aaa;padding:28px 0;font-size:13px;">
                                        No customers registered yet.
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- ‚ïê‚ïê TAB PANEL: MEDIATOR ‚ïê‚ïê -->
                <div class="dtab-panel" id="dpanel-mediator">
                    <div class="dtab-toolbar">
                        <input type="text" class="dtab-search" id="med-search" placeholder="üîç Search mediators‚Ä¶"
                            oninput="filterDashTable('mediator')">
                        <button class="dtab-export-btn" onclick="exportToExcel('mediator')">‚¨á Export Excel</button>
                    </div>
                    <div class="dash-table-wrap">
                        <table class="dash-table" id="mediatorDashTable">
                            <thead>
                                <tr>
                                    <th>S.No.</th>
                                    <th>Mediator Name</th>
                                    <th>Phone Number</th>
                                    <th>Location</th>
                                </tr>
                            </thead>
                            <tbody id="mediatorDashBody">
                                <tr>
                                    <td colspan="4" style="text-align:center;color:#aaa;padding:28px 0;font-size:13px;">
                                        No mediators found.
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- ‚ïê‚ïê TAB PANEL: PLOT PRICE ‚ïê‚ïê -->
                <div class="dtab-panel" id="dpanel-plot">
                    <div class="dtab-toolbar">
                        <input type="text" class="dtab-search" id="plot-search" placeholder="üîç Search plots‚Ä¶"
                            oninput="filterDashTable('plot')">
                        <select class="dtab-filter" id="plot-facing-filter" onchange="filterDashTable('plot')">
                            <option value="">All Facing</option>
                            <option value="East">East</option>
                            <option value="North">North</option>
                            <option value="West">West</option>
                            <option value="South">South</option>
                            <option value="NE">North-East</option>
                            <option value="NW">North-West</option>
                            <option value="SE">South-East</option>
                            <option value="SW">South-West</option>
                        </select>
                        <button class="dtab-export-btn" onclick="exportToExcel('plot')">‚¨á Export Excel</button>
                    </div>
                    <div class="dash-table-wrap">
                        <table class="dash-table" id="plotDashTable">
                            <thead>
                                <tr>
                                    <th>S.No.</th>
                                    <th>Plot Number</th>
                                    <th>Plot Price (‚Çπ)</th>
                                    <th>Length (ft)</th>
                                    <th>Width (ft)</th>
                                    <th>Sq. Feet</th>
                                    <th>Plot Facing</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody id="plotDashBody">
                                <tr>
                                    <td colspan="8" style="text-align:center;color:#aaa;padding:28px 0;font-size:13px;">
                                        No plot data found.
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

            </div><!-- /dash-body -->

            <!-- ‚ïê‚ïê INSTALLMENT MODAL ‚ïê‚ïê -->
           <div id="inst-modal" class="inst-modal-overlay">
    <div class="inst-modal-card">
        <div class="inst-modal-header">
            <div>
                <h3 class="inst-modal-title">üë§ Customer Details</h3>
                <p class="inst-modal-sub" id="inst-modal-customer"></p>
            </div>
            <button class="inst-modal-close" id="inst-modal-close">‚úï</button>
        </div>
        <div class="inst-modal-body">

            <!-- Customer Info Grid -->
            <div id="inst-modal-info" class="inst-cust-info"></div>

            <div class="inst-modal-section-title">üí∞ Payment Installments</div>
            <div class="dash-table-wrap">
                <table class="dash-table">
                    <thead>
                        <tr>
                            <th>S.No.</th>
                            <th>Amount Received (‚Çπ)</th>
                            <th>Date Received</th>
                            <th>Next Follow-up</th>
                        </tr>
                    </thead>
                    <tbody id="inst-modal-tbody"></tbody>
                </table>
            </div>
            <div class="inst-modal-total" id="inst-modal-total"></div>
        </div>
    </div>
</div>
        </div><!-- /dash-card -->
    </div><!-- /dashboard-popup -->

    <!-- ‚ïê‚ïê‚ïê POPUP ‚ïê‚ïê‚ïê -->
    <div id="popup" class="popup-overlay">
        <div class="popup-card">

            <!-- HEADER -->
            <div class="ph">
                <div class="ph-top">
                    <h3 class="ph-title" id="phTitle">Plot Details</h3>
                    <span class="ph-badge" id="phBadge">Plot</span>
                    <button class="btclose" id="btnClose">‚úï</button>
                </div>
                <div class="ptabs">
                    <button class="ptab active" id="tab-plot" onclick="switchTab('plot')">üìê Plot Details</button>
                    <button class="ptab" id="tab-customer" onclick="switchTab('customer')">üë§ Customer Details</button>
                    <button class="ptab" id="tab-mediator" onclick="switchTab('mediator')">ü§ù Mediator</button>
                </div>

            </div>

            <div class="pbody">

                <!-- ‚ïê‚ïê TAB: PLOT DETAILS ‚ïê‚ïê -->
                <div class="tpanel active" id="panel-plot">
                    <div class="slabel">Plot Information</div>

                    <div class="r2 mb">
                        <div class="fg">
                            <label>Plot Number</label>
                            <input type="text" id="plotNumber" readonly>
                        </div>
                        <div class="fg">
                            <label>Plot Price</label>
                            <div class="rupee-wrap">
                                <span class="rsym">‚Çπ</span>
                                <input type="number" id="plotPrice" class="pi" placeholder="0" style="margin-bottom: 0;">
                            </div>
                        </div>
                    </div>

                    <div class="r3 mb">
                        <div class="fg">
                            <label>Length (ft)</label>
                            <input type="number" id="plotLength" placeholder="e.g. 30">
                        </div>
                        <div class="fg">
                            <label>Width (ft)</label>
                            <input type="number" id="plotWidth" placeholder="e.g. 50">
                        </div>
                        <div class="fg">
                            <label>Sq. Feet</label>
                            <input type="number" id="plotSqft" placeholder="Auto or manual">
                        </div>
                    </div>

                    <div class="fg mb">
                        <label>Plot Facing</label>
                        <select id="plotFacing" style="max-width:220px;">
                            <option value="">‚Äî Select Facing ‚Äî</option>
                            <option value="East">East</option>
                            <option value="North">North</option>
                            <option value="West">West</option>
                            <option value="South">South</option>
                            <option value="NE">North-East</option>
                            <option value="NW">North-West</option>
                            <option value="SE">South-East</option>
                            <option value="SW">South-West</option>
                        </select>
                    </div>

                    <button class="btsave" id="btnSavePlot">üíæ Save Plot Details</button>
                </div>

                <!-- ‚ïê‚ïê TAB: CUSTOMER DETAILS ‚ïê‚ïê -->
                <div class="tpanel" id="panel-customer">

                    <div class="slabel">Customer Information</div>
                    <div class="r2 mb">
                        <div class="fg">
                            <label>Customer Name</label>
                            <input type="text" id="custName" placeholder="Full name‚Ä¶">
                        </div>
                        <div class="fg">
                            <label>Customer Phone Number</label>
                            <input type="tel" id="custPhone" placeholder="Mobile number‚Ä¶" maxlength="10">
                        </div>
                    </div>

                    <div class="fg mb">

                        <div class="med-cust-row">

                            <!-- Mediator Select -->
                            <div class="med-cust-sel">
                                <label>Mediator Name</label>
                                <select id="mediatorSel">
                                    <option value="">‚Äî Select Mediator ‚Äî</option>
                                    <option value="other">Other (type below)‚Ä¶</option>
                                </select>
                                <input type="text" id="mediatorOther" placeholder="Enter mediator name‚Ä¶"
                                    style="display:none; margin-top:7px;">

                            </div>

                            <!-- Commission Amount -->
                            <div class="med-cust-amt">
                                <label>Commission (‚Çπ)</label>
                                <div class="rupee-wrap">
                                    <span class="rsym">‚Çπ</span>
                                    <input type="number" id="custMedAmount" class="pi" placeholder="0"
                                        title="Auto-filled from Mediator tab" min="0">
                                </div>
                            </div>

                        </div>
                    </div>

                    <hr class="pdiv">

                    <!-- <div class="slabel">Price</div> -->
                    <div class="brow mb">
                        <div class="fg">
                            <label>Plot Price</label>
                            <div class="rupee-wrap">
                                <span class="rsym">‚Çπ</span>
                                <input type="number" id="bookingPrice" placeholder="Enter amount‚Ä¶" min="0">
                            </div>
                        </div>
                        <label class="chklbl" title="Auto-fill from plot price" style="margin-bottom: 0;">
                            <input type="checkbox" id="chkPlotPrice">
                            <span id="priceBadgeAmt"></span>
                        </label>
                    </div>

                    <hr class="pdiv">

                    <div class="slabel">üí∞ Payment Installments</div>
                    <div class="ilist" id="instList"></div>
                    <button class="btnadd" id="btnAddInst">Ôºã Add Payment Entry</button>

                    <div class="cstrip">
                        <div class="fg">
                            <label>Expected Closure Date</label>
                            <input type="date" id="closureDate">
                        </div>
                       
                    </div>

                    <hr class="pdiv">

                    <div class="slabel">Plot Status</div>
                    <div class="booking-check-wrap">
                        <label class="booking-chk-label" id="bookingChkLabel">
                            <input type="checkbox" id="chkBookingDone">
                            <span class="booking-chk-box"></span>

                            <span class="booking-chk-title">Booking Done</span>

                        </label>
                    </div>

                    <button class="btsave" id="btnSaveCust"> Save Customer Details</button>

                </div>

                <!-- ‚ïê‚ïê TAB: MEDIATOR DETAILS ‚ïê‚ïê -->
                <div class="tpanel" id="panel-mediator">

                    <div class="slabel">Mediator Information</div>

                    <!-- Input Section -->
                    <div class="med-input-section">
                        <div class="r3 mb">
                            <div class="fg">
                                <label>Mediator Name</label>
                                <input type="text" id="medName" placeholder="Enter name‚Ä¶" list="med-name-list">
                                <!-- <datalist id="med-name-list"></datalist> -->
                            </div>
                            <div class="fg">
                                <label>Mediator Phone</label>
                                <input type="tel" id="medPhone" placeholder="Mobile number‚Ä¶" maxlength="10">
                            </div>
                            <div class="fg">
                                <label>Location</label>
                                <input type="text" id="medLocation" placeholder="Enter location‚Ä¶">
                            </div>
                        </div>

                        <button class="btnadd" id="btnAddMedRow">Ôºã Add Mediator Entry</button>
                    </div>

                    <hr class="pdiv">

                    <!-- Table Section -->
                    <div class="slabel">Mediator Records</div>

                    <div class="med-table-wrap">
                        <table class="med-table" id="medTable">
                            <thead>
                                <tr>
                                    <th>S.No</th>
                                    <th>Mediator Name</th>
                                    <th>Phone Number</th>
                                    <th>Location</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody id="medTableBody">
                                <tr class="med-empty-row" id="medEmptyRow">
                                    <td colspan="5">
                                        <div class="med-table-empty">
                                            <span>ü§ù</span>
                                            <p>No mediator entries yet. Add one above.</p>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- Summary -->
                    <div class="med-summary" id="medSummary" style="display:none;">
                        <div class="med-sum-row">
                            <span class="med-sum-label">Total Mediators</span>
                            <span class="med-sum-val" id="medSumCount">0</span>
                        </div>
                    </div>

                    <button class="btsave" id="btnSaveMed">üíæ Save Mediator Details</button>
                </div>



            </div><!-- /pbody -->
        </div><!-- /popup-card -->
    </div><!-- /popup -->


    <!-- ‚ïê‚ïê‚ïê LOGIN MODAL ‚ïê‚ïê‚ïê -->
    <div id="login-modal" class="login-overlay">
        <div class="login-card">
            <button class="login-close" id="login-close">‚úï</button>

            <div class="login-header">
                <div class="login-icon">üîê</div>
                <h2 class="login-title">Welcome Back</h2>
                <p class="login-sub">Sign in to manage plots</p>
            </div>

            <div class="login-body">
                <div class="login-error" id="login-error">
                    ‚ö†Ô∏è Invalid username or password
                </div>

                <div class="lfg">
                    <label>Username</label>
                    <div class="linput-wrap">
                        <span class="linput-icon">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" />
                                <circle cx="12" cy="7" r="4" />
                            </svg>
                        </span>
                        <input type="text" id="login-username" class="linput" placeholder="Enter username‚Ä¶"
                            autocomplete="username">
                    </div>
                </div>

                <div class="lfg">
                    <label>Password</label>
                    <div class="linput-wrap">
                        <span class="linput-icon">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <rect x="3" y="11" width="18" height="11" rx="2" ry="2" />
                                <path d="M7 11V7a5 5 0 0 1 10 0v4" />
                            </svg>
                        </span>
                        <input type="password" id="login-password" class="linput" placeholder="Enter password‚Ä¶"
                            autocomplete="current-password">
                        <button class="linput-eye" id="toggle-password" title="Show/Hide password" type="button">
                            <svg id="eye-icon" width="16" height="16" viewBox="0 0 24 24" fill="none"
                                stroke="currentColor" stroke-width="2">
                                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11
                                     8-11-8-11-8z" />
                                <circle cx="12" cy="12" r="3" />
                            </svg>
                        </button>
                    </div>
                </div>

                <button class="login-btn" id="login-submit">
                    <span id="login-btn-text">Login</span>
                    <span id="login-spinner" class="login-spin" style="display:none;">‚ü≥</span>
                </button>
            </div>
        </div>
    </div>

    <!-- ‚ïê‚ïê‚ïê PROFILE DROPDOWN ‚ïê‚ïê‚ïê -->
    <div id="profile-dropdown" class="profile-dropdown">
        <div class="profile-info">
            <div class="profile-avatar" id="profile-avatar">A</div>
            <div>
                <div class="profile-name" id="profile-name">Admin</div>
                <div class="profile-role">Plot Manager</div>
            </div>
        </div>
        <hr class="profile-divider">
        <button class="profile-logout" id="btn-logout">
            <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4" />
                <polyline points="16 17 21 12 16 7" />
                <line x1="21" y1="12" x2="9" y2="12" />
            </svg>
            Logout
        </button>
    </div>


    <!-- profile -->
        <div class="plot-legend">
  <div class="legend-item">
    <span class="legend-color available"></span>
    <span>Available</span>
  </div>
 
  <div class="legend-item">
    <span class="legend-color sold"></span>
    <span>Sold</span>
  </div>
 
  <div class="legend-item">
    <span class="legend-color reserved"></span>
    <span>Reserved</span>
  </div>
</div>
 


    <script src="./script.js?v=5"></script>
</body>

</html>